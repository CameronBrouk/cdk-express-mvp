"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRole = void 0;
const iam = require("aws-cdk-lib/aws-iam");
const createRole = (scope, name, props) => {
    const servicesThatUseRole = props.forServices.map((service) => new iam.ServicePrincipal(service));
    const managedPolicies = props.permissionsGranted.map((policyName) => iam.ManagedPolicy.fromAwsManagedPolicyName(policyName));
    return new iam.Role(scope, name, {
        assumedBy: new iam.CompositePrincipal(...servicesThatUseRole),
        managedPolicies,
    });
};
exports.createRole = createRole;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlbnRpdHktYWNjZXNzLW1hbmFnZW1lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpZGVudGl0eS1hY2Nlc3MtbWFuYWdlbWVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQ0FBMEM7QUFLbkMsTUFBTSxVQUFVLEdBQUcsQ0FDeEIsS0FBZ0IsRUFDaEIsSUFBWSxFQUNaLEtBR0MsRUFDRCxFQUFFO0lBQ0YsTUFBTSxtQkFBbUIsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FDL0MsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUMvQyxDQUFBO0lBRUQsTUFBTSxlQUFlLEdBQUcsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQ2xFLEdBQUcsQ0FBQyxhQUFhLENBQUMsd0JBQXdCLENBQUMsVUFBVSxDQUFDLENBQ3ZELENBQUE7SUFFRCxPQUFPLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFO1FBQy9CLFNBQVMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLG1CQUFtQixDQUFDO1FBQzdELGVBQWU7S0FDaEIsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFBO0FBcEJZLFFBQUEsVUFBVSxjQW9CdEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBpYW0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWlhbSdcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnXG5pbXBvcnQgeyBNYW5hZ2VkUG9saWN5U3RyaW5nIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvbWFuYWdlZC1wb2xpY3ktc3RyaW5nJ1xuaW1wb3J0IHsgU2VydmljZVByaW5jaXBhbFN0cmluZyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzL3NlcnZpY2UtcHJpbmNpcGFsLXN0cmluZydcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJvbGUgPSAoXG4gIHNjb3BlOiBDb25zdHJ1Y3QsXG4gIG5hbWU6IHN0cmluZyxcbiAgcHJvcHM6IHtcbiAgICBmb3JTZXJ2aWNlczogU2VydmljZVByaW5jaXBhbFN0cmluZ1tdXG4gICAgcGVybWlzc2lvbnNHcmFudGVkOiBNYW5hZ2VkUG9saWN5U3RyaW5nW11cbiAgfSxcbikgPT4ge1xuICBjb25zdCBzZXJ2aWNlc1RoYXRVc2VSb2xlID0gcHJvcHMuZm9yU2VydmljZXMubWFwKFxuICAgIChzZXJ2aWNlKSA9PiBuZXcgaWFtLlNlcnZpY2VQcmluY2lwYWwoc2VydmljZSksXG4gIClcblxuICBjb25zdCBtYW5hZ2VkUG9saWNpZXMgPSBwcm9wcy5wZXJtaXNzaW9uc0dyYW50ZWQubWFwKChwb2xpY3lOYW1lKSA9PlxuICAgIGlhbS5NYW5hZ2VkUG9saWN5LmZyb21Bd3NNYW5hZ2VkUG9saWN5TmFtZShwb2xpY3lOYW1lKSxcbiAgKVxuXG4gIHJldHVybiBuZXcgaWFtLlJvbGUoc2NvcGUsIG5hbWUsIHtcbiAgICBhc3N1bWVkQnk6IG5ldyBpYW0uQ29tcG9zaXRlUHJpbmNpcGFsKC4uLnNlcnZpY2VzVGhhdFVzZVJvbGUpLFxuICAgIG1hbmFnZWRQb2xpY2llcyxcbiAgfSlcbn1cbiJdfQ==